<div id="page-sidebar"  class="bg-gradient-3 font-inverse">
	<div class="scroll-sidebar">

		<ul id="sidebar-menu">
			<li class="header"><span>Components</span></li>
			<li>
				<a href="javascript:void(0)" title="EXTAPP-DYNAMIC-M" class="sf-with-ul"> <i
						class="glyph-icon icon-linecons-diamond"></i> <span>EXTAPP-DYNAMIC-M</span>
				</a>
				<div class="sidebar-submenu">
					<ul>
						<li><a
								href="javascript:void(0)"
								data-url="/pages/extapp/samplemanager/sample-list.html"
								data-urldata=""
								data-tabid="layoutTab"
								data-tabmenuid="extAppSampleManagerTab"
								data-tabmenutitle="EXT-APP-SAMPLE-Manager"
						>EXTAPP SAMPLE Manager</a>
						</li>
					</ul>
				</div>
				<!-- .sidebar-submenu -->


				<a href="javascript:void(0)" title="Demo" class="sf-with-ul"> <i
						class="glyph-icon icon-linecons-diamond"></i> <span>Demo</span>
				</a>
				<div class="sidebar-submenu">
					<ul>
						<li><a
								href="javascript:void(0)"
								data-url="/pages/demo/search-add.html"
								data-urldata=""
								data-tabid="layoutTab"
								data-tabmenuid="searchDemo"
								data-tabmenutitle="Search-Demo"
						> Search</a>
						</li>

						<li><a
								href="javascript:void(0)"
								data-url="/pages/demo/tabs.html"
								data-urldata=""
								data-tabid="layoutTab"
								data-tabmenuid="tabDemo"
								data-tabmenutitle="Tab-Demo"
						> Tab</a>
						</li>

						<li><a href="javascript:void(0)"
							   data-url="/pages/demo/datatables.html"
							   data-urldata=""
							   data-tabid="layoutTab"
							   data-tabmenuid="dtatablesDemo"
							   data-tabmenutitle="Datatables-Demo"
						> Datatables</a>
						</li>

						<li><a href="javascript:void(0)"
							   data-url="/pages/demo/webuploader.html"
							   data-urldata=""
							   data-tabid="layoutTab"
							   data-tabmenuid="uploaderDemo"
							   data-tabmenutitle="Uploader-Demo"
						> WebUploader</a>
						</li>

						<li><a href="javascript:void(0)"
							   data-url="/pages/demo/webuploader-multi.html"
							   data-urldata=""
							   data-tabid="layoutTab"
							   data-tabmenuid="multiUploaderDemo"
							   data-tabmenutitle="MultiUploader-Demo"
						> Multi-WebUploader</a>
						</li>

						<li><a
								href="javascript:void(0)"
								data-url="/pages/demo/codetables.html"
								data-urldata=""
								data-tabid="layoutTab"
								data-tabmenuid="codeTableDemo"
								data-tabmenutitle="CodeTable-Demo"
						> CodeTable</a>
						</li>

						<li><a
								href="javascript:void(0)"
								data-url="/pages/demo/ueditor.html"
								data-urldata=""
								data-tabid="layoutTab"
								data-tabmenuid="ueditorDemo"
								data-tabmenutitle="Ueditor-Demo"
						> Ueditor</a>
						</li>

					</ul>
				</div>
				<!-- .sidebar-submenu -->

				<a href="javascript:void(0)" title="SYS-M" class="sf-with-ul"> <i
						class="glyph-icon icon-linecons-diamond"></i> <span>SYS-M</span>
				</a>
				<div class="sidebar-submenu">
					<ul>
						<li><a
						href="javascript:void(0)"
						data-url="/pages/dev/htmlpath-edit.html"
						data-urldata=""
						data-tabid="layoutTab"
						data-tabmenuid="htmlPathTab"
						data-tabmenutitle="HTML-PATH"
						> HTML-PATH-M(DEV)</a>
						</li>
						<li><a
						href="javascript:void(0)"
						data-url="/pages/dev/htmlusecache-edit.html"
						data-urldata=""
						data-tabid="layoutTab"
						data-tabmenuid="htmlUseCacheTab"
						data-tabmenutitle="HTML-USE-CACHE"
						> HTML-USE-CACHE(DEV)</a>
						</li>
						<li><a
						href="javascript:void(0)"
						data-url="/pages/runtimeurl/runtimeurl-list.html"
						data-urldata=""
						data-tabid="layoutTab"
						data-tabmenuid="runtimeurlTab"
						data-tabmenutitle="RUTIME-URL"
						> RUNTIME-URL-M(DEV)</a>
						</li>
						<li><a
						href="javascript:void(0)"
						data-url="/pages/resourcemanager/resource-list.html"
						data-urldata=""
						data-tabid="layoutTab"
						data-tabmenuid="resourceTab"
						data-tabmenutitle="RESOURCE-MANAGER"
						> RESOURCE-MANAGER</a>
						</li>
						<li><a
						href="javascript:void(0)"
						data-url="/pages/sysparam/sysparam-list.html"
						data-urldata=""
						data-tabid="layoutTab"
						data-tabmenuid="sysparamTab"
						data-tabmenutitle="SYS-PARAM"
						> SYS-PARAM</a>
						</li>
						<li><a
						href="javascript:void(0)"
						data-url="/pages/codetable/paramtype-list.html"
						data-urldata=""
						data-tabid="layoutTab"
						data-tabmenuid="paramTypeTab"
						data-tabmenutitle="Param-Type"
						> Param-Type</a>
						</li>
						<li><a
						href="javascript:void(0)"
						data-url="/pages/codetable/paramcode-list.html"
						data-urldata=""
						data-tabid="layoutTab"
						data-tabmenuid="paramCodeTab"
						data-tabmenutitle="Param-Code"
						> Param-Code</a>
						</li>
						<li><a
						href="javascript:void(0)"
						data-url="/pages/menumanager/menu-list.html"
						data-urldata=""
						data-tabid="layoutTab"
						data-tabmenuid="menuManagerTab"
						data-tabmenutitle="Menu-Manager"
						> Menu-M</a>
						</li>
								</ul>
							</div>
							<!-- .sidebar-submenu -->


							<a href="javascript:void(0)" title="User-R-G-M"  class="sf-with-ul"> <i
								class="glyph-icon icon-linecons-diamond"></i> <span>User-R-G-M</span>
						</a>
							<div class="sidebar-submenu">
								<ul>
									<li><a
            href="javascript:void(0)"
            data-url="/pages/groupmanager/role-list.html"
            data-urldata=""
            data-tabid="layoutTab"
            data-tabmenuid="roleManagerTab"
            data-tabmenutitle="Role-Manager"
            > Role</a>
            </li>

            <li><a
            href="javascript:void(0)"
            data-url="/pages/groupmanager/group-list.html"
            data-urldata=""
            data-tabid="layoutTab"
            data-tabmenuid="groupManagerTab"
            data-tabmenutitle="Group-Manager"
            > Group</a>
            </li>

            <li><a
            href="javascript:void(0)"
            data-url="/pages/usermanager/user-list.html"
            data-urldata=""
            data-tabid="layoutTab"
            data-tabmenuid="userManagerTab"
            data-tabmenutitle="User-Manager"
            > User</a>
            </li>
								</ul>
							</div>
							<!-- .sidebar-submenu -->

							<a href="javascript:void(0)" title="User-R-G-M"  class="sf-with-ul"> <i
									class="glyph-icon icon-linecons-diamond"></i> <span>CMS-M</span>
							</a>
							<div class="sidebar-submenu">
								<ul>
									<li><a
											href="javascript:void(0)"
											data-url="/pages/cms/colmanager/col-list.html"
											data-urldata=""
											data-tabid="layoutTab"
											data-tabmenuid="colManagerTab"
											data-tabmenutitle="Column-Manager"
									> Column</a>
									</li>
									<li><a
											href="javascript:void(0)"
											data-url="/pages/cms/contentmanager/content-list.html"
											data-urldata=""
											data-tabid="layoutTab"
											data-tabmenuid="contentManagerTab"
											data-tabmenutitle="Content-Manager"
									> Content</a>
									</li>

								</ul>
							</div>
							<!-- .sidebar-submenu -->

					<a href="javascript:void(0)" title="CONTAINER-M"  class="sf-with-ul"> <i
								class="glyph-icon icon-linecons-diamond"></i> <span>CONTAINER-M</span>
						</a>
							<div class="sidebar-submenu">
								<ul>
									<li><a
            href="javascript:void(0)"
            data-url="/pages/containermanager/container-list.html"
            data-urldata=""
            data-tabid="layoutTab"
            data-tabmenuid="containerManagerTab"
            data-tabmenutitle="Container-Manager"
            > Container Manager</a>
            </li>
								</ul>
							</div>
							<!-- .sidebar-submenu -->





	<a href="javascript:void(0)" title="BILL-M"  class="sf-with-ul"> <i
								class="glyph-icon icon-linecons-diamond"></i> <span>BILL-M</span>
						</a>
							<div class="sidebar-submenu">
								<ul>
									<li><a
            href="javascript:void(0)"
            data-url="/pages/billmanager/bill-list.html"
            data-urldata=""
            data-tabid="layoutTab"
            data-tabmenuid="billManagerTab"
            data-tabmenutitle="Bill-Manager"
            > Bill Manager</a>
            </li>
          	<li><a
            href="javascript:void(0)"
            data-url="/pages/billmanager/good-list.html"
            data-urldata=""
            data-tabid="layoutTab"
            data-tabmenuid="goodManagerTab"
            data-tabmenutitle="Good-Manager"
            > Good Manager</a>
            </li>
								</ul>
							</div>
							<!-- .sidebar-submenu -->





						</li>
						<li class="header"  id="_document_start"><span>Document</span></li>
					</ul>
					<!-- #sidebar-menu -->
				</div>


				<div style="display: none;"  id="_template_treeview">
					<div  id="_template_treeview_menu">
						<ul>
							<li>
								<a href="javascript:void(0)" title="EXTAPP-DYNAMIC-M"  class="sf-with-ul">
								<i class="glyph-icon icon-linecons-diamond"></i>
								<span>EXTAPP-DYNAMIC-M</span>
								</a>
								<div class="sidebar-submenu">
									<ul>

									</ul>
								</div>
							</li>
						</ul>

					</div>

					<div  id="_template_treeview_item">
					<ul>
						<li><a
						            href="javascript:void(0)"
						            data-url=""
						            data-urldata=""
						            data-tabid="layoutTab"
						            data-tabmenuid=""
						            data-tabmenutitle=""
						            >EXTAPP SAMPLE Manager</a>
						            </li>
			            </ul>
					</div>

				</div>


			</div>
  <script type="text/javascript">

  $_youapp.ready(function() {

  	var page=$.extend({
  		root:$("#page-sidebar"),
  		model:{
  		}
  	},$_youapp.pageTemplate);

	  function getMenuNode(_name){
		  var $menuNode=page.root.find('#_template_treeview > #_template_treeview_menu>ul>li ').clone(false);
		  var $menuNodeLink=$menuNode.find('a');
		  $menuNodeLink.find('i:first').next('span').text(_name);
		  return $menuNode;
	  }

	  function appendMenu(parent,child){
		  $(parent).find('.sidebar-submenu').first().children('ul').append($(child));
	  }

	  function getMenuItem(data){
		  var $menuItem=page.root.find('#_template_treeview > #_template_treeview_item> ul>li ').clone(false);
		  var $menuItemLink=$menuItem.find('a');
		  $menuItemLink.val('href','javascript:void(0)');
		  $menuItemLink.attr('data-url',data.url);
		  $menuItemLink.attr('data-urldata','');
		  $menuItemLink.attr('data-tabid','layoutTab');
		  $menuItemLink.attr('data-tabmenuid',data.code+'_'+data.id);
		  $menuItemLink.attr('data-tabmenutitle',data.name);
		  $menuItemLink.text(data.name);
		  return $menuItem;
	  }

	  var $sideBar=page.root.find('#sidebar-menu');

	  function cycle(eles,opts,menus,parent){
			for(var i=0;i<eles.length;i++){
				var _data=eles[i];
				var child;
				if(_data.children.length>0){  // menu node
					child=getMenuNode(_data.data.name);
				}
				else{
					child=getMenuItem(_data.data);
				}
				if(parent){
					appendMenu(parent, child);
				}

				if(_data.meta.level==1){
					menus.push(child);
				}
				if(_data.children.length>0){  // menu node
					cycle(_data.children,opts,menus,child);
				}
			}
		}

	  page.ajaxGet({
			  url:'/menumanager/getMenusTree',
			  formData:{
			  },
			  success:function(data){
				  try{
					  var menus=[];
					  cycle(data, {},menus);
					  for(var i=0;i<menus.length;i++){
						  var menu=menus[i];
						  $sideBar.find('#_document_start').before(menu);
					  }
				  }catch (e) {
					  page.warning(e);
					}
				  $sideBar.find('a[data-url]').on('click',function(event){
					  $_youapp.$_html.newTab($(event.target));
					  $(this).closest('li').addClass('active');
				  });
			  }
		});

	  $(document).on('click','.sf-with-ul',function(){
			$(this).next().toggle(600);
		});

	  var $menu=page.root;
	  $menu.css({
		  'overflow-y':'auto'
	  });
	  $menu.hover(function(){
		  $menu.css({
			  'overflow-y':'auto'
		  });
	  },function(){
		  $menu.css({
			  'overflow-y':'hidden'
		  });
		 // $menu.find('.treeview').width($menu.innerWidth());
	  });

	  function setHeight(){
		  var windowHeight=$(window).height();
		  var menuHeight=$menu.position().top;
		  page.log('window-height: '+windowHeight);
		  page.log('menu-height: '+menuHeight);
		  var height=windowHeight-menuHeight;
		  $menu.css({
			  'height':height+'px'
		  });
		  page.log(height)
	  }
	  setHeight();

	  $(window).resize(function(){
		  setTimeout(setHeight,150);
	  });

	  $(window).scroll(function(){
		  //setTimeout(setHeight(),2000);
	  });


	  //
	  page.root.on('show.bs.collapse',function(){
  		page.info('aside show...');
	  });
	  page.root.on('hide.bs.collapse',function(){
	  		page.info('aside hide...');
	  		})
  })
  </script>
