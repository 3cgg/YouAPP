<!-- Main content -->
<section class="content" id="peekContentPopSection" ms-controller="content_peek_pop_view">

    <div class="box box-bys-content">
        <!--   .box-header   -->
        <!-- /.box-header -->


        <div style="text-align: center">
            <h1>{{data.title}}</h1>
            <span>
                    作者 : <span style="font-weight: bold">{{data.author}}</span> &nbsp;&nbsp;&nbsp;&nbsp;
                    来源 : {{data.source}} &nbsp;&nbsp;&nbsp;&nbsp;
                    发布时间 : {{data.publishTime}} &nbsp;&nbsp;&nbsp;&nbsp;
                    顺序 : <span>{{data.sequence}}</span>
                </span>
            <div>
                源地址（http://） : <a ms-attr-href="data.link" target="_blank" style="color: #337ab7;">{{data.link}}</a>
            </div>

        </div>

        <div style="padding: 10px 30px; min-height: 150px;">

            <img id="adImag"
                 style="width: 120px;height: 120px;position: relative;float: left;margin-right: 10px;margin-bottom: 10px;"/>
            <p>{{data.overview}}</p>
        </div>

        <div id="contentDiv" style="border-top: #ddd 1px solid;padding: 30px;height:3000px;">

            <iframe id="contentViewIframe" style="    border-top-width: 0px;
    border-right-width: 0px;
    border-bottom-width: 0px;
    border-left-width: 0px;
    width: 100%;
    height: 100%;">
                <html>
                <head></head>
                <body>

                </body>

                </html>
            </iframe>

        </div>

    </div>
</section>
<script type="text/javascript">

    $_youapp.ready(function () {

        var page = $.extend({
            root: $("#peekContentPopSection"),
            model: {
                vm: avalon.define({
                    $id: "content_peek_pop_view",
                    data: {}
                })
            }
        }, $_youapp.pageTemplate);

        avalon.scan(page.root[0], page.model.vm);  // void braces

        function getId() {
            debugger;
            return page.modal.param(page, "contentId");
        }

        page.ajaxGet({
            url: '/contentmanager/getContentById',
            formData: {'id': getId()},
            success: function (data) {
                page.model.vm.data = data;
                avalon.scan(page.root[0], page.model.vm);

                page.root.find('#adImag').attr('src', data.adImgFile.uri);

                $(window.frames["contentViewIframe"].contentDocument).find('body').html(data.content);

            }
        });

        page.modal.registerParent(page);

    });
</script>



